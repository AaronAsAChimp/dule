/*! dule - v0.1.0 - 2012-08-21
* Copyright (c) 2012 Aaron Spaulding; Licensed MIT */
function define(a,b,c){"use strict";if(typeof a!="string")throw"E:1";typeof c=="undefined"&&(c=b,b=[]);var d=define,e=d.loader,f=a.split("!"),g,h;f[0].length===0&&(e=f[0],f.length!==1&&(a=f[1])),e=new d.loaders[e],a=e.resolve(d.module_path,a),a in d._modules||(d._modules[a]=new d.Module(a));for(g in b)b[g]=e.resolve(d.module_path,b[g]);d._modules[a].factory(c),d._modules[a].depends_on(b);for(g in b){h=b[g];if(h in d._modules&&!d._modules[h].is_loaded())throw"E:2";h in d._modules||(d._modules[h]=new d.Module(h),e.load(h)),d._modules[h].dependency_of(d._modules[a])}}(function(a){"use strict",a.Module=function(a){this._id=a,this._dependency_of=[],this._loaded_depends={},this._is_factory_called=!1,this._depends=null,this._left=1/0,this._factory=null};var b=a.Module.prototype;b.depends_on=function(a){this._depends=a,this._left=a.length,this.is_loaded()&&this.backtrack()},b.factory=function(a){this._factory=a},b.dependency_of=function(a){this._dependency_of.push(a),this.is_loaded()&&a.dependency_loaded(this._id,this._factory)},b.is_loaded=function(){return this._left===0},b.backtrack=function(){this.prepare_factory();for(var a=this._dependency_of.length-1;a>=0;a--)this._dependency_of[a].dependency_loaded(this._id,this._factory)},b.prepare_factory=function(){if(!this._is_factory_called&&typeof this._factory=="function"){for(var a=this._depends.length-1;a>=0;a--)this._depends[a]=this._loaded_depends[this._depends[a]];this._is_factory_called=!0,this._factory=this._factory.apply(null,this._depends)}},b.dependency_loaded=function(a,b){this._left--,this._loaded_depends[a]=b,this.is_loaded()&&this.backtrack()},a.loaders={},a._modules={},a._util={isArray:function(a){return a instanceof Array}};if(!1)a._util.error=function(a){return"Dule: ERROR: "+a},a._util.warn=function(a){return"Dule: WARNING: "+a},a._util.save=function(){return{_util:{},_modules:{"loader/path":a._modules["loader/path"]},module_path:a.module_path,loader:a.loader}},a._util.reset=function(b){var c=document.getElementsByName("modulejs-module"),d;a._modules={"loader/path":a._modules["loader/path"]},a.module_path=b.module_path,a.loader=b.loader;for(d=c.length-1;d>=0;d--)c[d].parentNode.removeChild(c[d])};a.module_path="/modules/",a.loader="nop",a.amd={},a.loaders.nop=function(){},a.loaders.nop.prototype.load=function(b){if(!1)console.warn(a._util.warn("A module ("+b+") has been asked to load with the NOP"+" loader.\n\nThe NOP loader assumes that module has been loaded"+" through some other mechanism. To remove this warning, double"+" check that you have included all your dependencies and then"+" reorder them so that a dependencies are not required before"+" they are loaded."))},a.loaders.nop.prototype.resolve=function(a,b){return b}})(define),define("loader/path",function(){"use strict",define.loader="path",define.loaders.path=function(){};var a=define.loaders.path.prototype;a.load=function(a){var b=document.createElement("script"),c=document.body;b.async=!0,b.src=a+".js";if(!1)b.id="module-"+a,b.name="dule-module";c.appendChild(b)},a.resolve=function(a,b){switch(b.charAt(0)){case".":var c=b.split("/"),d=a.split("/"),e;d.pop();for(e in c)c[0]===".."&&d.pop(),c.shift();return d.join("/")+"/"+c.join("/");case"/":return b;case"h":if(/https?:.*/.test(b))return b;return a+b;default:return a+b}}});