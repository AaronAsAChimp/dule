/*! modulejs - v0.0.1 - 2012-08-14
* Copyright (c) 2012 Aaron Spaulding; Licensed MIT */
function define(e,t,n){"use strict";var r=define,i,s;if(typeof n=="undefined")if(typeof t=="undefined")n=e,e=null,t=[];else if(typeof e=="string")n=t,t=[];else{if(!r._util.isArray(e))throw"E:1";n=t,t=e,e=null}if(e!==null){e=r._util.path_resolve(r.module_path,e),e in r._modules||(r._modules[e]=new r.Module(e));for(i in t)t[i]=r._util.path_resolve(r.module_path,t[i]);r._modules[e].factory(n),r._modules[e].depends_on(t);for(i in t){s=t[i];if(s in r._modules&&!r._modules[s].is_loaded())throw"E:2";r._modules[s]=new r.Module(s),r._modules[s].dependency_of(r._modules[e]),r._util.require(s)}}}(function(e,t){"use strict";e.Module=function(e){this._id=e,this._dependency_of=[],this._loaded_depends={},this._is_factory_called=!1,this._depends=null,this._left=1/0,this._factory=null};var n=e.Module.prototype;n.depends_on=function(e){this._depends=e,this._left=e.length,this.is_loaded()&&this.backtrack()},n.factory=function(e){this._factory=e},n.dependency_of=function(e){this._dependency_of.push(e)},n.is_loaded=function(){return this._left===0},n.backtrack=function(){this.prepare_factory();for(var e=this._dependency_of.length-1;e>=0;e--)this._dependency_of[e].dependency_loaded(this._id,this._factory)},n.prepare_factory=function(){if(!this._is_factory_called&&typeof this._factory=="function"){for(var e=this._depends.length-1;e>=0;e--)this._depends[e]=this._loaded_depends[this._depends[e]];this._is_factory_called=!0,this._factory=this._factory.apply(null,this._depends)}},n.dependency_loaded=function(e,t){this._left--,this._loaded_depends[e]=t,this.is_loaded()&&this.backtrack()},e._modules={},e._util={isArray:Array.isArray||function(e){return e instanceof Array},path_resolve:function(e,t){switch(t.charAt(0)){case".":var n=t.split("/"),r=e.split("/"),i;r.pop();for(i in n)n[0]===".."&&r.pop(),n.shift();return r.join("/")+"/"+n.join("/");case"/":return t;case"h":if(/https?:.*/.test(t))return t;return e+t;default:return e+t}},require:function(e){var n=t.createElement("script"),r=t.getElementsByTagName("head")[0];n.id="module-"+e,n.src=e+".js",r.appendChild(n)}},e.module_path="/modules/",e.amd={}})(define,document);