/*! modulejs - v0.0.1 - 2012-08-19
* Copyright (c) 2012 Aaron Spaulding; Licensed MIT */
function define(e,t,n){"use strict";if(typeof e!="string")throw"E:1";typeof n=="undefined"&&(n=t,t=[]);var r=define,i=r.loader,s=e.split("!"),o,u;s[0].length===0&&(i=s[0],s.length!==1&&(e=s[1])),i=new r.loaders[i],e=i.resolve(r.module_path,e),e in r._modules||(r._modules[e]=new r.Module(e));for(o in t)t[o]=i.resolve(r.module_path,t[o]);r._modules[e].factory(n),r._modules[e].depends_on(t);for(o in t){u=t[o];if(u in r._modules&&!r._modules[u].is_loaded())throw"E:2";u in r._modules||(r._modules[u]=new r.Module(u),i.load(u)),r._modules[u].dependency_of(r._modules[e])}}(function(e){"use strict";e.Module=function(e){this._id=e,this._dependency_of=[],this._loaded_depends={},this._is_factory_called=!1,this._depends=null,this._left=1/0,this._factory=null};var t=e.Module.prototype;t.depends_on=function(e){this._depends=e,this._left=e.length,this.is_loaded()&&this.backtrack()},t.factory=function(e){this._factory=e},t.dependency_of=function(e){this._dependency_of.push(e),this.is_loaded()&&e.dependency_loaded(this._id,this._factory)},t.is_loaded=function(){return this._left===0},t.backtrack=function(){this.prepare_factory();for(var e=this._dependency_of.length-1;e>=0;e--)this._dependency_of[e].dependency_loaded(this._id,this._factory)},t.prepare_factory=function(){if(!this._is_factory_called&&typeof this._factory=="function"){for(var e=this._depends.length-1;e>=0;e--)this._depends[e]=this._loaded_depends[this._depends[e]];this._is_factory_called=!0,this._factory=this._factory.apply(null,this._depends)}},t.dependency_loaded=function(e,t){this._left--,this._loaded_depends[e]=t,this.is_loaded()&&this.backtrack()},e.loaders={},e._modules={},e._util={isArray:function(e){return e instanceof Array}},e.module_path="/modules/",e.loader="nop",e.amd={},e.loaders.nop=function(){},e.loaders.nop.prototype.load=function(t){},e.loaders.nop.prototype.resolve=function(e,t){return t}})(define);